#!/usr/bin/env python3
"""
–§—ñ–Ω–∞–ª—å–Ω–∏–π —Ç–µ—Å—Ç —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ —á–µ–∫—ñ–≤
"""

print("üß™ –ó–í–Ü–¢ –ü–†–û –¢–ï–°–¢–£–í–ê–ù–ù–Ø –ù–û–í–û–á –§–£–ù–ö–¶–Ü–û–ù–ê–õ–¨–ù–û–°–¢–Ü –ß–ï–ö–Ü–í")
print("=" * 60)

print("\nüìã –©–û –ë–£–õ–û –†–ï–ê–õ–Ü–ó–û–í–ê–ù–û:")
print("‚úÖ 1. –ó–º—ñ–Ω–µ–Ω–æ –ª–æ–≥—ñ–∫—É –æ–±—Ä–æ–±–∫–∏ —á–µ–∫—ñ–≤ - —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –ù–ï –¥–æ–¥–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ")
print("‚úÖ 2. –î–æ–¥–∞–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —á–µ–∫–∞ –≤ context.user_data['pending_receipt']")
print("‚úÖ 3. –î–æ–¥–∞–Ω–æ –∫–Ω–æ–ø–∫–∏ '–î–æ–¥–∞—Ç–∏' —Ç–∞ '–ù–∞–∑–∞–¥' –ø—ñ—Å–ª—è –æ–±—Ä–æ–±–∫–∏ —á–µ–∫–∞")
print("‚úÖ 4. –°—Ç–≤–æ—Ä–µ–Ω–æ callback handler 'confirm_receipt_add' –¥–ª—è –∫–Ω–æ–ø–∫–∏ '–î–æ–¥–∞—Ç–∏'")
print("‚úÖ 5. –°—Ç–≤–æ—Ä–µ–Ω–æ callback handler 'back_to_main_menu' –¥–ª—è –∫–Ω–æ–ø–∫–∏ '–ù–∞–∑–∞–¥'")
print("‚úÖ 6. –ü—Ä–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—ñ - —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ –ë–î")
print("‚úÖ 7. –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è–º —Ç–∞ –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó")

print("\nüîÑ –ü–û–¢–Ü–ö –†–û–ë–û–¢–ò:")
print("1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î —Ñ–æ—Ç–æ —á–µ–∫–∞")
print("2. –ë–æ—Ç —Ä–æ–∑–ø—ñ–∑–Ω–∞—î —á–µ–∫ —Ç–∞ –∑–±–µ—Ä–µ–∂–µ –¥–∞–Ω—ñ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ")
print("3. –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:")
print("   '‚úÖ –ß–µ–∫ –æ–±—Ä–æ–±–ª–µ–Ω–æ!' + —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —á–µ–∫")
print("   + [–ö–Ω–æ–ø–∫–∞: ‚úÖ –î–æ–¥–∞—Ç–∏] [–ö–Ω–æ–ø–∫–∞: ‚ùå –ù–∞–∑–∞–¥]")
print("4. –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ '–î–æ–¥–∞—Ç–∏':")
print("   - –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö")
print("   - –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è")
print("   - –ü—Ä–æ–ø–æ–Ω—É—é—Ç—å—Å—è –æ–ø—Ü—ñ—ó: '–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó' –∞–±–æ '–ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é'")
print("5. –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ '–ù–∞–∑–∞–¥' - –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é")

print("\nüìÅ –ó–ú–Ü–ù–ï–ù–Ü –§–ê–ô–õ–ò:")
print("1. handlers/message_handler.py:")
print("   - –ó–º—ñ–Ω–µ–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é handle_photo()")
print("   - –ó–∞–º—ñ—Å—Ç—å add_transaction() —Ç–µ–ø–µ—Ä –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ context.user_data")
print("   - –î–æ–¥–∞–Ω–æ –∫–Ω–æ–ø–∫–∏ –¥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è")

print("\n2. handlers/callback_handler.py:")
print("   - –î–æ–¥–∞–Ω–æ —ñ–º–ø–æ—Ä—Ç–∏ add_transaction —Ç–∞ TransactionType")
print("   - –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ 'confirm_receipt_add' —Ç–∞ 'back_to_main_menu'")
print("   - –°—Ç–≤–æ—Ä–µ–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é handle_confirm_receipt_add()")

print("\nüéØ –ü–ï–†–ï–í–ê–ì–ò –ù–û–í–û–á –†–ï–ê–õ–Ü–ó–ê–¶–Ü–á:")
print("‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø–µ—Ä–µ–¥ –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º")
print("‚úÖ –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å–∫–∞—Å—É–≤–∞—Ç–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó")
print("‚úÖ –ë—ñ–ª—å—à —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π –¥–æ—Å–≤—ñ–¥")
print("‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π")

print("\nüß™ –†–ï–ó–£–õ–¨–¢–ê–¢–ò –¢–ï–°–¢–£–í–ê–ù–ù–Ø:")

try:
    # –¢–µ—Å—Ç 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∫–æ–¥—É
    from handlers.callback_handler import handle_confirm_receipt_add
    print("‚úÖ –§—É–Ω–∫—Ü—ñ—è handle_confirm_receipt_add —É—Å–ø—ñ—à–Ω–æ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–∞")
    
    # –¢–µ—Å—Ç 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ–º–ø–æ—Ä—Ç—ñ–≤
    from handlers.callback_handler import add_transaction, TransactionType
    print("‚úÖ –Ü–º–ø–æ—Ä—Ç–∏ add_transaction —Ç–∞ TransactionType –ø—Ä–∞—Ü—é—é—Ç—å")
    
    # –¢–µ—Å—Ç 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —á–µ–∫–∞
    from services.free_receipt_parser import free_receipt_parser
    print("‚úÖ –ü–∞—Ä—Å–µ—Ä —á–µ–∫—ñ–≤ –¥–æ—Å—Ç—É–ø–Ω–∏–π")
    
    print("\nüéâ –í–°–Ü –¢–ï–°–¢–ò –ü–†–û–ô–®–õ–ò –£–°–ü–Ü–®–ù–û!")
    
except Exception as e:
    print(f"\n‚ùå –ü–æ–º–∏–ª–∫–∞ –≤ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ: {e}")

print("\nüìû –î–õ–Ø –ö–û–†–ò–°–¢–£–í–ê–ß–ê:")
print("–¢–µ–ø–µ—Ä –ø—ñ—Å–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–æ—Ç–æ —á–µ–∫–∞ –±–æ—Ç:")
print("1. –ü–æ–∫–∞–∂–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω–∏–π —á–µ–∫")
print("2. –î–∞—Å—Ç—å –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∞–±–æ —Å–∫–∞—Å—É–≤–∞—Ç–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—è")
print("3. –ü—Ä–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—ñ –¥–æ–¥–∞—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é —Ç–∞ –ø–æ–∫–∞–∂–µ –æ–ø—Ü—ñ—ó")

print("\n" + "=" * 60)
print("‚úÖ –Ü–ú–ü–õ–ï–ú–ï–ù–¢–ê–¶–Ü–Ø –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–Ü–®–ù–û!")
