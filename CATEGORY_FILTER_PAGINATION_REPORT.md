# –ó–≤—ñ—Ç: –î–æ–¥–∞–Ω–æ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞–ª–∞—Å—è –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–Ω–æ–ø–æ–∫, —â–æ —Ä–æ–±–∏–ª–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ–∑—Ä—É—á–Ω–∏–º –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞–Ω–Ω—è. –¢–∞–∫–æ–∂ –Ω–µ –±—É–ª–æ –ª–æ–≥—ñ—á–Ω–æ–≥–æ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑–∞ —Ç–∏–ø–∞–º–∏ (–≤–∏—Ç—Ä–∞—Ç–∏/–¥–æ—Ö–æ–¥–∏).

## –†—ñ—à–µ–Ω–Ω—è

–î–æ–¥–∞–Ω–æ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é –¥–ª—è –º–µ–Ω—é –≤–∏–±–æ—Ä—É –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –ø—Ä–∏ —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –∑ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –Ω–∞ "–≤–∏—Ç—Ä–∞—Ç–∏" —Ç–∞ "–¥–æ—Ö–æ–¥–∏".

## –í–Ω–µ—Å–µ–Ω—ñ –∑–º—ñ–Ω–∏

### 1. –§–∞–π–ª: `handlers/transaction_handler.py`

#### –î–æ–¥–∞–Ω—ñ/–æ–Ω–æ–≤–ª–µ–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

- `show_category_filter_menu(query, context, page=1)` - –≥–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é —Ç–∞ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º
- `handle_category_page_navigation(query, context)` - –æ–±—Ä–æ–±–∫–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏
- `handle_category_selection_for_filter(query, context)` - –æ–±—Ä–æ–±–∫–∞ –≤–∏–±–æ—Ä—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

#### –ö–ª—é—á–æ–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:

- **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –∑–∞ —Ç–∏–ø–∞–º–∏**: –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ä–æ–∑–¥—ñ–ª—è—é—Ç—å—Å—è –Ω–∞ –≤–∏—Ç—Ä–∞—Ç–∏ (TransactionType.EXPENSE) —Ç–∞ –¥–æ—Ö–æ–¥–∏ (TransactionType.INCOME)
- **–õ–æ–≥—ñ—á–Ω–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è**: –í–∏—Ç—Ä–∞—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –ø–µ—Ä—à–∏–º–∏, –ø–æ—Ç—ñ–º –¥–æ—Ö–æ–¥–∏ –Ω–∞ –∫–æ–∂–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
- **–Ü–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑–∞ —Ç–∏–ø–∞–º–∏ "üí∏ –í–∏—Ç—Ä–∞—Ç–∏: X | üí∞ –î–æ—Ö–æ–¥–∏: Y"

#### –û–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è:

- `handle_category_filter()` - —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–æ–≤–µ –º–µ–Ω—é –∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é —Ç–∞ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º –∑–∞–º—ñ—Å—Ç—å —Å—Ç–∞—Ä–æ–≥–æ —Å–ø–∏—Å–∫—É

### 2. –§–∞–π–ª: `handlers/callback_handler.py`

#### –î–æ–¥–∞–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ callback'—ñ–≤:

- `category_page_*` - –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∑ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è –∑ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º

- **–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É**: 8
- **–†–æ–∑–º—ñ—â–µ–Ω–Ω—è**: –ø–æ 2 –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤ —Ä—è–¥
- **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è**: –í–∏—Ç—Ä–∞—Ç–∏ –≥—Ä—É–ø—É—é—Ç—å—Å—è –æ–∫—Ä–µ–º–æ –≤—ñ–¥ –¥–æ—Ö–æ–¥—ñ–≤
- **–ù–∞–≤—ñ–≥–∞—Ü—ñ—è**: –∫–Ω–æ–ø–∫–∏ "‚¨ÖÔ∏è –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ" —Ç–∞ "–ù–∞—Å—Ç—É–ø–Ω—ñ ‚û°Ô∏è" (—Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- **–Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä**: –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–∏–ø—ñ–≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π

### –õ–æ–≥—ñ—á–Ω–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è

- **–í–∏—Ç—Ä–∞—Ç–∏**: –í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –ø–µ—Ä—à–∏–º–∏ –∑ —ñ–∫–æ–Ω–∫–æ—é üí∏
- **–î–æ—Ö–æ–¥–∏**: –í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –ø—ñ—Å–ª—è –≤–∏—Ç—Ä–∞—Ç –∑ —ñ–∫–æ–Ω–∫–æ—é üí∞
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: "üí∏ –í–∏—Ç—Ä–∞—Ç–∏: X | üí∞ –î–æ—Ö–æ–¥–∏: Y" —É –∑–∞–≥–æ–ª–æ–≤–∫—É
- **–í—ñ–∑—É–∞–ª—å–Ω–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è**: –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø—Ä–∏—Ä–æ–¥–Ω–æ –≥—Ä—É–ø—É—é—Ç—å—Å—è –∑–∞ —Ç–∏–ø–æ–º

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π –¥–æ—Å–≤—ñ–¥

- –û–ø—Ü—ñ—è "–í—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó" –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –Ω–∞ –ø–µ—Ä—à—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
- –ü–æ—Ç–æ—á–Ω–∞ –≤–∏–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è –≤—ñ–¥–º—ñ—á–∞—î—Ç—å—Å—è —Å–∏–º–≤–æ–ª–æ–º ‚úÖ
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –º–µ–Ω—é —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ –ø—ñ—Å–ª—è –≤–∏–±–æ—Ä—É
- –ú—ñ–Ω—ñ–º–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–µ–∑ –∑–∞–π–≤–∏—Ö –∫–Ω–æ–ø–æ–∫
- **–õ–æ–≥—ñ—á–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –õ–µ–≥–∫–æ –∑–Ω–∞–π—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ç–∏–ø –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π (–≤—ñ–¥ 0 –¥–æ –Ω–µ–æ–±–º–µ–∂–µ–Ω–æ—ó)
- –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–æ–∫
- –ë–µ–∑–ø–µ—á–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è (–Ω–µ–º–æ–∂–ª–∏–≤–æ –≤–∏–π—Ç–∏ –∑–∞ –º–µ–∂—ñ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫)
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
- **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è expense_categories —Ç–∞ income_categories
- **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è**: –ó–∞–≥–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ (–≤–∏—Ç—Ä–∞—Ç–∏ + –¥–æ—Ö–æ–¥–∏) –¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó –∑ –ø–æ–¥–∞–ª—å—à–∏–º —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª `test_category_pagination_improvements.py` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ª–æ–≥—ñ–∫–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó –∑ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º:

```
–í—Å—å–æ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π: 15
–í–∏—Ç—Ä–∞—Ç–∏: 10  |  –î–æ—Ö–æ–¥–∏: 5
–í—Å—å–æ–≥–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫: 2

–°–¢–û–†–Ü–ù–ö–ê 1: 8 –≤–∏—Ç—Ä–∞—Ç + –∫–Ω–æ–ø–∫–∞ "–í—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó"
–°–¢–û–†–Ü–ù–ö–ê 2: 2 –≤–∏—Ç—Ä–∞—Ç–∏ + 5 –¥–æ—Ö–æ–¥—ñ–≤

‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π—à–æ–≤ —É—Å–ø—ñ—à–Ω–æ!
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∫–Ω–æ–ø–æ–∫ –≤–∏—Ä—ñ—à–µ–Ω–∞  
‚úÖ –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∞–≤ –±—ñ–ª—å—à –∑—Ä—É—á–Ω–∏–º —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∏–º  
‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö  
‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–∞ –≤—Å—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó  
‚úÖ **–î–æ–¥–∞–Ω–æ –ª–æ–≥—ñ—á–Ω–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –Ω–∞ –≤–∏—Ç—Ä–∞—Ç–∏ —Ç–∞ –¥–æ—Ö–æ–¥–∏**  
‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å —á–µ—Ä–µ–∑ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–∞ —Ç–∏–ø–∞–º–∏**

–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Ç–µ–ø–µ—Ä –º–æ–∂—É—Ç—å –ª–µ–≥–∫–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ –≤–µ–ª–∏–∫—ñ–π —ó—Ö –∫—ñ–ª—å–∫–æ—Å—Ç—ñ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∑—Ä—É—á–Ω—É –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é –∑ –ª–æ–≥—ñ—á–Ω–∏–º —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º –Ω–∞ –≤–∏—Ç—Ä–∞—Ç–∏ —Ç–∞ –¥–æ—Ö–æ–¥–∏.

## –ú–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

1. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ —Ç–∏–ø–æ–º**: –ö–Ω–æ–ø–∫–∏ "–¢—ñ–ª—å–∫–∏ –≤–∏—Ç—Ä–∞—Ç–∏" / "–¢—ñ–ª—å–∫–∏ –¥–æ—Ö–æ–¥–∏"
2. **–í—ñ–∑—É–∞–ª—å–Ω—ñ —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫–∏**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å–µ–∫—Ü—ñ–π —É –º–µ–Ω—é
3. **–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è**: –ó–∞ —á–∞—Å—Ç–æ—Ç–æ—é –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
