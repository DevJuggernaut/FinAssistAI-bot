# üèÜ –ó–í–Ü–¢ –ü–†–û –ó–ê–í–ï–†–®–ï–ù–ù–Ø –ü–û–ö–†–ê–©–ï–ù–¨ TELEGRAM-–ë–û–¢–ê

## üìã –ó–ê–í–î–ê–ù–ù–Ø

–ü–æ–∫—Ä–∞—â–∏—Ç–∏ Telegram-–±–æ—Ç –¥–ª—è —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤ —Ç–∞–∫, —â–æ–±:

1. –ü—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –≤—Ä—É—á–Ω—É ML-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ç–æ—Ä –ø—Ä–∏–∑–Ω–∞—á–∞–≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é –ª–∏—à–µ –∑ –Ω–∞—è–≤–Ω–∏—Ö —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–≤–∫–ª—é—á–∞—é—á–∏ –∫–∞—Å—Ç–æ–º–Ω—ñ)
2. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –¥–æ–¥–∞–≤–∞–ª–∞—Å—è –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É, —è–∫–∏–π –æ–±–∏—Ä–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á

## ‚úÖ –í–ò–ö–û–ù–ê–ù–Ü –ó–ê–í–î–ê–ù–ù–Ø

### 1. ü§ñ ML-–ö–ê–¢–ï–ì–û–†–ò–ó–ê–¢–û–†

- ‚úÖ **–ü–µ—Ä–µ–ø–∏—Å–∞–Ω–æ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**

  - –ù–µ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
  - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ª–∏—à–µ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó, —â–æ —î —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  - –î–æ–¥–∞–Ω–æ –Ω–∞–≤—á–∞–Ω–Ω—è –Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  - –ü–æ–∫—Ä–∞—â–µ–Ω–æ –∞–ª–≥–æ—Ä–∏—Ç–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑ –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–∏–º –∞–Ω–∞–ª—ñ–∑–æ–º

- ‚úÖ **–î–æ–¥–∞–Ω–æ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤'—è–∑–æ–∫**
  - –í—Ä–∞—Ö–æ–≤—É—î —Ä—É—á–Ω–∏–π –≤–∏–±—ñ—Ä –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º
  - –ü–æ–∫—Ä–∞—â—É—î —Ç–æ—á–Ω—ñ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–∏–±–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–∫–∞–∑–∞–ª–æ 80% —Ç–æ—á–Ω–æ—Å—Ç—ñ –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö

### 2. üí≥ –°–ò–°–¢–ï–ú–ê –†–ê–•–£–ù–ö–Ü–í

- ‚úÖ **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è–º–∏**

  - –ö–æ–∂–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –ø—Ä–∏–≤'—è–∑—É—î—Ç—å—Å—è –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É, —è–∫—â–æ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ —ñ–Ω—à–∏–π
  - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è `account_id` —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö

- ‚úÖ **–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∏–±–æ—Ä—É —Ä–∞—Ö—É–Ω–∫—É**

  - –î–æ–¥–∞–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é `show_account_selection()` –¥–ª—è –ø–æ–∫–∞–∑—É —Å–ø–∏—Å–∫—É —Ä–∞—Ö—É–Ω–∫—ñ–≤
  - –î–æ–¥–∞–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—é `handle_account_selection()` –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–∏–±–æ—Ä—É
  - –û–Ω–æ–≤–ª–µ–Ω–æ callback-–æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è `manual_expense`/`manual_income`

- ‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–æ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π**
  - `add_transaction()` —Ç–µ–ø–µ—Ä –ø—ñ–¥—Ç—Ä–∏–º—É—î `account_id`
  - `save_transaction_to_db()` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–∏–±—Ä–∞–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è `selected_account_id` –ø—ñ—Å–ª—è –æ–ø–µ—Ä–∞—Ü—ñ—ó

### 3. üîß –¢–ï–•–ù–Ü–ß–ù–Ü –ü–û–ö–†–ê–©–ï–ù–ù–Ø

- ‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–æ –±–∞–∑—É –¥–∞–Ω–∏—Ö**

  - –¢–∞–±–ª–∏—Ü—è `transactions` –º–∞—î –ø–æ–ª–µ `account_id`
  - –§—É–Ω–∫—Ü—ñ—è `get_user_main_account_id()` –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É
  - –õ–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫

- ‚úÖ **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏**
  - –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `AccountType.BANK_CARD` –∑–∞–º—ñ—Å—Ç—å –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ `DEBIT_CARD`
  - –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —Ä–∞—Ö—É–Ω–∫—ñ–≤
  - –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–∫—É –≤–∏–ø–∞–¥–∫—ñ–≤, –∫–æ–ª–∏ —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ–º–∞—î —Ä–∞—Ö—É–Ω–∫—ñ–≤

### 4. üß™ –¢–ï–°–¢–£–í–ê–ù–ù–Ø

- ‚úÖ **–°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏**

  - `test_accounts_integration.py` - —Ç–µ—Å—Ç—É—î –±–∞–∑–æ–≤—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é
  - `test_complete_integration.py` - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π —Ç–µ—Å—Ç –≤—Å—ñ—î—ó —Å–∏—Å—Ç–µ–º–∏
  - `test_ml_categorizer_integration.py` - —Ç–µ—Å—Ç ML-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ç–æ—Ä–∞

- ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
  - –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É—Å–ø—ñ—à–Ω–æ
  - –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–≤'—è–∑—É—é—Ç—å—Å—è –¥–æ —Ä–∞—Ö—É–Ω–∫—ñ–≤
  - –ê–≤—Ç–æ–≤–∏–±—ñ—Ä –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ
  - –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–æ–±–ª—è—î –≤–∏–ø–∞–¥–∫–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ —Ä–∞—Ö—É–Ω–∫—ñ–≤

## üìÅ –ó–ú–Ü–ù–ï–ù–Ü –§–ê–ô–õ–ò

### –û—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏:

1. **`handlers/transaction_handler.py`**

   - ‚ûï –î–æ–¥–∞–Ω–æ `show_account_selection()`
   - ‚ûï –î–æ–¥–∞–Ω–æ `handle_account_selection()`
   - üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ `save_transaction_to_db()` –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ `account_id`
   - üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó

2. **`database/db_operations.py`**

   - üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ `add_transaction()` –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ `account_id`
   - ‚ûï –î–æ–¥–∞–Ω–æ `get_user_main_account_id()`
   - ‚ûï –î–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è

3. **`handlers/callback_handler.py`**

   - üîÑ –û–Ω–æ–≤–ª–µ–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ `manual_expense`/`manual_income`
   - ‚ûï –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫ `select_account_`
   - ‚ûï –î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫ `create_account`

4. **`services/ml_categorizer.py`**
   - üîÑ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   - ‚ûï –î–æ–¥–∞–Ω–æ –Ω–∞–≤—á–∞–Ω–Ω—è –Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
   - ‚ûï –î–æ–¥–∞–Ω–æ –ø–æ–∫—Ä–∞—â–µ–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—ó

## üéØ –†–û–ë–û–ß–ò–ô –ü–†–û–¶–ï–°

### –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –≤—Ä—É—á–Ω—É:

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–î–æ–¥–∞—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é" ‚Üí "–†—É—á–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è"
2. –û–±–∏—Ä–∞—î —Ç–∏–ø: "–í–∏—Ç—Ä–∞—Ç–∞" –∞–±–æ "–î–æ—Ö—ñ–¥"
3. **–ù–û–í–ò–ô –ö–†–û–ö:** –û–±–∏—Ä–∞—î —Ä–∞—Ö—É–Ω–æ–∫ –∑—ñ —Å–ø–∏—Å–∫—É
4. –í–≤–æ–¥–∏—Ç—å —Å—É–º—É —Ç–∞ –æ–ø–∏—Å
5. ML-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ç–æ—Ä –ø—Ä–æ–ø–æ–Ω—É—î –∫–∞—Ç–µ–≥–æ—Ä—ñ—é –∑ —ñ—Å–Ω—É—é—á–∏—Ö —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
6. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –∑ –ø—Ä–∏–≤'—è–∑–∫–æ—é –¥–æ –æ–±—Ä–∞–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è:

- –ê–Ω–∞–ª—ñ–∑—É—î –æ–ø–∏—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ª–∏—à–µ —ñ—Å–Ω—É—é—á—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –í—Ä–∞—Ö–æ–≤—É—î —ñ—Å—Ç–æ—Ä—ñ—é –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π
- –ù–∞–≤—á–∞—î—Ç—å—Å—è –Ω–∞ –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –∑–≤'—è–∑–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

## ‚ú® –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:

- üéØ **–¢–æ—á–Ω—ñ—à–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ª–∏—à–µ –≤–ª–∞—Å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
- üí≥ **–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞—Ö—É–Ω–∫—ñ–≤** - –º–æ–∂–µ –æ–±–∏—Ä–∞—Ç–∏, –Ω–∞ —è–∫–∏–π —Ä–∞—Ö—É–Ω–æ–∫ –¥–æ–¥–∞–≤–∞—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é
- üìä **–ö—Ä–∞—â–∏–π –æ–±–ª—ñ–∫** - –≤—Å—ñ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ä–∞—Ö—É–Ω–∫—ñ–≤
- üöÄ **–ü—Ä–æ—Å—Ç–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–∏–π –≤–∏–±—ñ—Ä —Ä–∞—Ö—É–Ω–∫—É –ø–µ—Ä–µ–¥ –≤–≤–µ–¥–µ–Ω–Ω—è–º —Å—É–º–∏

### –î–ª—è —Å–∏—Å—Ç–µ–º–∏:

- üîó **–ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** - —Ä–∞—Ö—É–Ω–∫–∏ —Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å —Ä–∞–∑–æ–º
- üõ°Ô∏è **–°—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å** - –æ–±—Ä–æ–±–∫–∞ –≤—Å—ñ—Ö –∫—Ä–∞–π–Ω—ñ—Ö –≤–∏–ø–∞–¥–∫—ñ–≤
- üìà **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
- üß™ **–ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ** - –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ–∫—Ä–∏—Ç—ñ —Ç–µ—Å—Ç–∞–º–∏

## üéâ –í–ò–°–ù–û–í–û–ö

**–í—Å—ñ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω—ñ!**

Telegram-–±–æ—Ç —Ç–µ–ø–µ—Ä:

1. ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î ML-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ç–æ—Ä, —â–æ –ø—Ä–∞—Ü—é—î –ª–∏—à–µ –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
2. ‚úÖ –î–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –æ–±–∏—Ä–∞—Ç–∏ —Ä–∞—Ö—É–Ω–æ–∫ –¥–ª—è –∫–æ–∂–Ω–æ—ó —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó
3. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏–≤'—è–∑—É—î —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É, —è–∫—â–æ –Ω–µ –æ–±—Ä–∞–Ω–æ —ñ–Ω—à–∏–π
4. ‚úÖ –ú–∞—î —Å—Ç–∞–±—ñ–ª—å–Ω—É —Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω—É —Å–∏—Å—Ç–µ–º—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —É –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ! üöÄ
