# üìÖ –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –î–ù–Ü–í –¢–ò–ñ–ù–Ø - –ó–ê–í–ï–†–®–ï–ù–û

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–£ —Å—Ç–æ–≤–ø—á–∞—Å—Ç–∏—Ö –≥—Ä–∞—Ñ—ñ–∫–∞—Ö –¥–ª—è —Ç–∏–∂–Ω–µ–≤–æ–≥–æ –ø–µ—Ä—ñ–æ–¥—É –¥–Ω—ñ —Ç–∏–∂–Ω—è –≤—ñ–¥–æ–±—Ä–∞–∂–∞–ª–∏—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°—å–æ–≥–æ–¥–Ω—ñ –≤—ñ–≤—Ç–æ—Ä–æ–∫ 24.06.2025, –∞–ª–µ –ø–æ–∑–Ω–∞—á–∞–ª–æ—Å—è —è–∫ –ø–æ–Ω–µ–¥—ñ–ª–æ–∫ —á–µ—Ä–µ–∑ –ø–æ–º–∏–ª–∫–∏ –≤ –ª–æ–≥—ñ—Ü—ñ "–°—å–æ–≥–æ–¥–Ω—ñ" —Ç–∞ "–í—á–æ—Ä–∞".

## ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. üîß –°–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª—é—á—ñ–≤

**–§–∞–π–ª:** `handlers/analytics_handler.py`

**–ë—É–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**

```python
elif period == "week":
    # –°–∫–ª–∞–¥–Ω–∞ –ª–æ–≥—ñ–∫–∞ –∑ "–°—å–æ–≥–æ–¥–Ω—ñ", "–í—á–æ—Ä–∞"
    now = datetime.now()
    transaction_date = transaction.transaction_date
    days_ago = (now.date() - transaction_date.date()).days

    if days_ago == 0:
        key = f"–°—å–æ–≥–æ–¥–Ω—ñ ({transaction_date.strftime('%d.%m')})"
    elif days_ago == 1:
        key = f"–í—á–æ—Ä–∞ ({transaction_date.strftime('%d.%m')})"
    else:
        weekdays = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–ù–¥']
        weekday_name = weekdays[transaction_date.weekday()]
        key = f"{weekday_name} ({transaction_date.strftime('%d.%m')})"
```

**–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**

```python
elif period == "week":
    # –ü—Ä–æ—Å—Ç–∞ —Ç–∞ –Ω–∞–¥—ñ–π–Ω–∞ –ª–æ–≥—ñ–∫–∞ - —Ç—ñ–ª—å–∫–∏ –¥–µ–Ω—å —Ç–∏–∂–Ω—è + –¥–∞—Ç–∞
    weekdays = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–ù–¥']
    weekday_name = weekdays[transaction.transaction_date.weekday()]
    key = f"{weekday_name} ({transaction.transaction_date.strftime('%d.%m')})"
```

### 2. üóìÔ∏è –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ all_keys

**–ë—É–ª–æ (—Å–∫–ª–∞–¥–Ω–æ):**

```python
for i in range(6, -1, -1):
    date = now - timedelta(days=i)
    if i == 0:
        key = f"–°—å–æ–≥–æ–¥–Ω—ñ ({date.strftime('%d.%m')})"
    elif i == 1:
        key = f"–í—á–æ—Ä–∞ ({date.strftime('%d.%m')})"
    else:
        weekdays = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–ù–¥']
        weekday_name = weekdays[date.weekday()]
        key = f"{weekday_name} ({date.strftime('%d.%m')})"
    all_keys.append(key)
```

**–°—Ç–∞–ª–æ (–ø—Ä–æ—Å—Ç–æ):**

```python
for i in range(6, -1, -1):
    date = now - timedelta(days=i)
    weekdays = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–ù–¥']
    weekday_name = weekdays[date.weekday()]
    key = f"{weekday_name} ({date.strftime('%d.%m')})"
    all_keys.append(key)
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1. –¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ –¥–Ω—ñ–≤ —Ç–∏–∂–Ω—è

**–§–∞–π–ª:** `test_correct_weekdays.py`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
–û—Å—Ç–∞–Ω–Ω—ñ 7 –¥–Ω—ñ–≤ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –¥–Ω—è–º–∏ —Ç–∏–∂–Ω—è:
  1. –°—Ä (18.06) | –†–µ–∞–ª—å–Ω–∏–π: Wednesday | ‚úÖ
  2. –ß—Ç (19.06) | –†–µ–∞–ª—å–Ω–∏–π: Thursday | ‚úÖ
  3. –ü—Ç (20.06) | –†–µ–∞–ª—å–Ω–∏–π: Friday | ‚úÖ
  4. –°–± (21.06) | –†–µ–∞–ª—å–Ω–∏–π: Saturday | ‚úÖ
  5. –ù–¥ (22.06) | –†–µ–∞–ª—å–Ω–∏–π: Sunday | ‚úÖ
  6. –ü–Ω (23.06) | –†–µ–∞–ª—å–Ω–∏–π: Monday | ‚úÖ
  7. –í—Ç (24.06) | –†–µ–∞–ª—å–Ω–∏–π: Tuesday | ‚úÖ
```

### 2. –¢–µ—Å—Ç —Å—Ç–æ–≤–ø—á–∞—Å—Ç–æ–≥–æ –≥—Ä–∞—Ñ—ñ–∫—É

**–§–∞–π–ª:** `test_correct_weekdays_bar_chart.py`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
üìÖ –ö–ª—é—á—ñ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –¥–Ω—è–º–∏ —Ç–∏–∂–Ω—è:
  1. –°—Ä (18.06) ‚úÖ
  2. –ß—Ç (19.06) ‚úÖ
  3. –ü—Ç (20.06) ‚úÖ
  4. –°–± (21.06) ‚úÖ
  5. –ù–¥ (22.06) ‚úÖ
  6. –ü–Ω (23.06) ‚úÖ
  7. –í—Ç (24.06) ‚úÖ  ‚Üê –ü–†–ê–í–ò–õ–¨–ù–û!
```

## üìä –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É

### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–∞ –Ω–∞–¥—ñ–π–Ω—ñ—Å—Ç—å

1. **–ú–µ–Ω—à–µ –ø–æ–º–∏–ª–æ–∫** - –Ω–µ–º–∞ —Å–∫–ª–∞–¥–Ω–æ—ó –ª–æ–≥—ñ–∫–∏ –∑ "–°—å–æ–≥–æ–¥–Ω—ñ"/"–í—á–æ—Ä–∞"
2. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å** - –≤—Å—ñ –¥–Ω—ñ –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ñ–æ—Ä–º–∞—Ç
3. **–ó—Ä–æ–∑—É–º—ñ–ª—ñ—Å—Ç—å** - –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∫–æ–¥

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è

1. **–¢–æ—á–Ω—ñ –¥–Ω—ñ —Ç–∏–∂–Ω—è** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `date.weekday()` –Ω–∞–ø—Ä—è–º—É
2. **–ê–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞—Ç–∏** - –ø–æ–∫–∞–∑—É—î —Ä–µ–∞–ª—å–Ω—É –¥–∞—Ç—É —É –¥—É–∂–∫–∞—Ö
3. **–õ–æ–≥—ñ—á–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫** - –≤—ñ–¥ –Ω–∞–π—Å—Ç–∞—Ä—à–æ–≥–æ –¥–æ –Ω–∞–π–Ω–æ–≤—ñ—à–æ–≥–æ

### ‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π –¥–æ—Å–≤—ñ–¥

1. **–ó—Ä–æ–∑—É–º—ñ–ª—ñ –ø—ñ–¥–ø–∏—Å–∏** - "–í—Ç (24.06)" –∑—Ä–æ–∑—É–º—ñ–ª—ñ—à–µ –∑–∞ "–°—å–æ–≥–æ–¥–Ω—ñ"
2. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç** - –≤—Å—ñ –¥–Ω—ñ –≤–∏–≥–ª—è–¥–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–æ
3. **–ë–µ–∑ –ø–ª—É—Ç–∞–Ω–∏–Ω–∏** - –Ω–µ–º–∞—î –Ω–µ—Ç–æ—á–Ω–∏—Ö –ø–æ–∑–Ω–∞—á–µ–Ω—å

## üìà –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

**–î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**

```
–ü–æ–º–∏–ª–∫–æ–≤—ñ –ø—ñ–¥–ø–∏—Å–∏ –∑ "–°—å–æ–≥–æ–¥–Ω—ñ" —è–∫ –ø–æ–Ω–µ–¥—ñ–ª–æ–∫
```

**–ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**

```
–°—Ä (18.06): –î–æ—Ö–æ–¥–∏ 2,700 –≥—Ä–Ω, –í–∏—Ç—Ä–∞—Ç–∏ 900 –≥—Ä–Ω
–ß—Ç (19.06): –î–æ—Ö–æ–¥–∏ 0 –≥—Ä–Ω, –í–∏—Ç—Ä–∞—Ç–∏ 800 –≥—Ä–Ω
–ü—Ç (20.06): –î–æ—Ö–æ–¥–∏ 2,300 –≥—Ä–Ω, –í–∏—Ç—Ä–∞—Ç–∏ 700 –≥—Ä–Ω
–°–± (21.06): –î–æ—Ö–æ–¥–∏ 0 –≥—Ä–Ω, –í–∏—Ç—Ä–∞—Ç–∏ 600 –≥—Ä–Ω
–ù–¥ (22.06): –î–æ—Ö–æ–¥–∏ 1,900 –≥—Ä–Ω, –í–∏—Ç—Ä–∞—Ç–∏ 500 –≥—Ä–Ω
–ü–Ω (23.06): –î–æ—Ö–æ–¥–∏ 0 –≥—Ä–Ω, –í–∏—Ç—Ä–∞—Ç–∏ 400 –≥—Ä–Ω
–í—Ç (24.06): –î–æ—Ö–æ–¥–∏ 1,500 –≥—Ä–Ω, –í–∏—Ç—Ä–∞—Ç–∏ 300 –≥—Ä–Ω  ‚Üê –ü–†–ê–í–ò–õ–¨–ù–û!
```

## ‚úÖ –°—Ç–∞—Ç—É—Å: –í–ò–ü–†–ê–í–õ–ï–ù–û

–ü—Ä–æ–±–ª–µ–º–∞ –∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –¥–Ω—è–º–∏ —Ç–∏–∂–Ω—è –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏—Ä—ñ—à–µ–Ω–∞. –¢–µ–ø–µ—Ä:

- **–í—ñ–≤—Ç–æ—Ä–æ–∫ 24.06.2025** –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫ **"–í—Ç (24.06)"**
- **–ü–æ–Ω–µ–¥—ñ–ª–æ–∫ 23.06.2025** –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —è–∫ **"–ü–Ω (23.06)"**
- –í—Å—ñ —ñ–Ω—à—ñ –¥–Ω—ñ —Ç–∏–∂–Ω—è —Ç–∞–∫–æ–∂ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –õ–æ–≥—ñ–∫–∞ —Å–ø—Ä–æ—â–µ–Ω–∞ —Ç–∞ –±—ñ–ª—å—à –Ω–∞–¥—ñ–π–Ω–∞

**–î–∞—Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** 24 —á–µ—Ä–≤–Ω—è 2025  
**–§–∞–π–ª–∏ –∑–º—ñ–Ω–µ–Ω–æ:** `handlers/analytics_handler.py`  
**–¢–µ—Å—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–æ:** `test_correct_weekdays.py`, `test_correct_weekdays_bar_chart.py`
